<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Punjabi Stream</title>
  <link rel="icon" href="https://i.postimg.cc/FRDPFKpY/favicon-96x96.png" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Gurmukhi:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="https://www.youtube.com/iframe_api"></script>
  <style>
    html, body {
      margin: 0; padding: 0; height: 100%;
      background-color: black; font-family: sans-serif;
      overflow: hidden;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }
    #container { position: relative; width: 100vw; height: 100vh; }
    #stream { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; z-index: 0; }
    #stream iframe { width: 100%; height: 100%; border: none; }
    #hls-video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; display: none; }
    #hls-video::-webkit-media-controls { display: none !important; }
    #overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; cursor: pointer; }
    #channelName {
      position: absolute; bottom: -60px; left: 0;
      width: 100%;
      background: rgba(0,41,107,0.7); color: #ffd500;
      padding: 12px 20px; font-size: 22px; font-weight: bold;
      text-align: center; opacity: 0;
      transition: all 0.6s ease; z-index: 3;font-family: "Noto Sans Gurmukhi", sans-serif;
    }
    #channelName.show { bottom: 0; opacity: 1; }
    .loading {
      position: absolute; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 50px; height: 50px;
      border: 5px solid rgba(255, 213, 0, 0.3);
      border-radius: 50%; border-top-color: #ffd500;
      animation: spin 1s ease-in-out infinite;
      z-index: 4; display: none;
    }
    @keyframes spin { to { transform: translate(-50%, -50%) rotate(360deg); } }

    /* Time TV wallpaper and golden text */
    #time-tv {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: none;
      z-index: 1;
      background: url("https://i.postimg.cc/053WPD28/haarimandr.png") no-repeat center center;
      background-size: cover;
      color: #FFFFFF; /* golden */
      font-family: "Arial Black", sans-serif;
    }
    #time-tv .clock {
  position: absolute;
  top: 6%; 
  right: 5%;
  font-size: 6vw;
}

#time-tv .date {
  position: absolute;
  top: 4%; /* moved slightly lower */
  right: 9%;
  font-size: 2.0vw; /* made a bit smaller */
}

  </style>
</head>
<body>
  <div id="container">
    <div id="stream"></div>
    <video id="hls-video" playsinline></video>

    <!-- Time TV (Channel 7) -->
    <div id="time-tv">
      <div class="clock">00:00</div>
      <div class="date">November 4, 2025</div>
    </div>

    <div id="overlay"></div>
    <div id="channelName"></div>
    <div class="loading" id="loading"></div>
  </div>

  
<script>
const CHANNELS = [
  { 
    name: "1. ‡®™‡®ü‡®®‡®æ ‡®∏‡®æ‡®π‡®ø‡®¨ ‡®≤‡®æ‡®à‡®µ",
    url: "https://www.youtube.com/embed/live_stream?channel=UC3nqw1kd4AK1q9e68YUoLDQ&autoplay=1&mute=0&modestbranding=1&controls=0&showinfo=0&rel=0",
    fallback: "https://www.youtube.com/embed/TTK7eNuI3M0?autoplay=1&mute=0&modestbranding=1&controls=0&showinfo=0&rel=0",
    type: "youtube"
  },
  { name: "2. ‡®Ö‡©∞‡®Æ‡©ç‡®∞‡®ø‡®§‡®∏‡®∞ ‡®∏‡®æ‡®π‡®ø‡®¨ ‡®≤‡®æ‡®à‡®µ", url: "https://www.youtube.com/embed/live_stream?channel=UCYn6UEtQ771a_OWSiNBoG8w&autoplay=1&modestbranding=1&controls=0&showinfo=0&rel=0", type: "youtube" },
  { name: "3. ‡®ö‡©ú‡®¶‡©Ä‡®ï‡®≤‡®æ ‡®ü‡®æ‡®à‡®Æ ‡®ü‡©Ä‡®µ‡©Ä", url: "https://www.yupptv.com/yupptvnew/channels/chardikala-time-tv/live/embed", type: "iframe" },
  { name: "4. ‡®°‡©Ä‡®°‡©Ä ‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä", url: "https://d3eyhgoylams0m.cloudfront.net/v1/manifest/93ce20f0f52760bf38be911ff4c91ed02aa2fd92/ed7bd2c7-8d10-4051-b397-2f6b90f99acb/20c8ad14-a158-4a42-8889-e032d070856e/2.m3u8", type: "hls" },
  { name: "5. ‡®´‡®§‡©á‡®π‡®ó‡©ú‡©ç‡®π ‡®∏‡®æ‡®π‡®ø‡®¨ ‡®≤‡®æ‡®à‡®µ", url: "https://www.youtube.com/embed/live_stream?channel=UCudVHqnOekwcvpzNpY8_ERw&autoplay=1&modestbranding=1&controls=0&showinfo=0&rel=0", type: "youtube" },
  { name: "6. ‡®π‡®ú‡®º‡©Ç‡®∞ ‡®∏‡®æ‡®π‡®ø‡®¨ ‡®≤‡®æ‡®à‡®µ", url: "https://www.youtube.com/embed/live_stream?channel=UCuerQ47I9Y2qxr4eIopxbYw&autoplay=1&modestbranding=1&controls=0&showinfo=0&rel=0", type: "youtube" },
  { name: "7. ‡®≤‡®æ‡®à‡®µ ‡®ü‡®æ‡®à‡®Æ", type: "time" }
];

const STREAM_DIV = document.getElementById('stream');
const HLS_VIDEO = document.getElementById('hls-video');
const TIME_TV = document.getElementById('time-tv');
const channelNameBox = document.getElementById('channelName');
const loadingIndicator = document.getElementById('loading');
let currentChannel = parseInt(localStorage.getItem('currentChannel')) || 0;
if (currentChannel < 0 || currentChannel >= CHANNELS.length) currentChannel = 0;
let hideTimeout, hls, youtubePlayer, refreshTimer;
let usingFallback = false, channel1Retry = false;

function loadChannel(index) {
  localStorage.setItem('currentChannel', index);
  loadingIndicator.style.display = 'block';
  STREAM_DIV.style.display = 'none';
  HLS_VIDEO.style.display = 'none';
  TIME_TV.style.display = 'none';
  STREAM_DIV.innerHTML = '';
  HLS_VIDEO.pause();
  usingFallback = false;
  channel1Retry = false;
  if (hls) hls.destroy();
  if (youtubePlayer) { youtubePlayer.destroy(); youtubePlayer = null; }

  const channel = CHANNELS[index];

  if (channel.type === 'youtube') {
    STREAM_DIV.style.display = 'block';
    const iframe = document.createElement('iframe');
    if (index === 0 && !usingFallback) {
      iframe.src = channel.url;
      iframe.onload = () => {
        loadingIndicator.style.display = 'none';
        setTimeout(() => {
          if (iframe.src === channel.url && !channel1Retry) {
            channel1Retry = true;
            iframe.src = channel.fallback;
            showChannelName(channel.name + " (Fallback)");
          }
        }, 5000);
      };
      iframe.onerror = () => {
        if (!usingFallback && channel.fallback) {
          usingFallback = true;
          iframe.src = channel.fallback;
          showChannelName(channel.name + " (Fallback)");
        }
      };
    } else {
      iframe.src = usingFallback && channel.fallback ? channel.fallback : channel.url;
      iframe.onload = () => loadingIndicator.style.display = 'none';
    }
    iframe.setAttribute('allow', 'autoplay; encrypted-media; fullscreen');
    STREAM_DIV.appendChild(iframe);

  } else if (channel.type === 'iframe') {
    STREAM_DIV.style.display = 'block';
    const iframe = document.createElement('iframe');
    iframe.src = channel.url;
    iframe.setAttribute('allow', 'autoplay; encrypted-media; fullscreen');
    iframe.onload = () => loadingIndicator.style.display = 'none';
    STREAM_DIV.appendChild(iframe);

  } else if (channel.type === 'hls') {
    HLS_VIDEO.style.display = 'block';
    if (HLS_VIDEO.canPlayType('application/vnd.apple.mpegurl')) {
      HLS_VIDEO.src = channel.url;
      HLS_VIDEO.addEventListener('loadedmetadata', () => { HLS_VIDEO.play(); loadingIndicator.style.display = 'none'; });
    } else if (Hls.isSupported()) {
      hls = new Hls();
      hls.loadSource(channel.url);
      hls.attachMedia(HLS_VIDEO);
      hls.on(Hls.Events.MANIFEST_PARSED, () => { HLS_VIDEO.play(); loadingIndicator.style.display = 'none'; });
    }

  } else if (channel.type === 'time') {
    TIME_TV.style.display = 'block';
    loadingIndicator.style.display = 'none';
  }

  showChannelName(channel.name);
  setupAutoRefresh();
}

function showChannelName(name) {
  channelNameBox.textContent = name;
  channelNameBox.classList.add("show");
  clearTimeout(hideTimeout);
  hideTimeout = setTimeout(() => channelNameBox.classList.remove("show"), 3000);
}

function setupAutoRefresh() {
  clearTimeout(refreshTimer);
  refreshTimer = setTimeout(() => window.location.reload(), 5400000);
}

function nextChannel() { currentChannel = (currentChannel + 1) % CHANNELS.length; loadChannel(currentChannel); }
function prevChannel() { currentChannel = (currentChannel - 1 + CHANNELS.length) % CHANNELS.length; loadChannel(currentChannel); }
function jumpToChannel(index) { currentChannel = index; loadChannel(currentChannel); }

document.getElementById('overlay').addEventListener('click', nextChannel);
document.addEventListener('keydown', (e) => {
  if (e.key === "ArrowRight" || e.key.toLowerCase() === "d") nextChannel();
  else if (e.key === "ArrowLeft" || e.key.toLowerCase() === "a") prevChannel();
  else if (/^[1-7]$/.test(e.key)) jumpToChannel(parseInt(e.key) - 1);
});

// üïí Local system time clock (12-hour format with uppercase AM/PM)
function updateLocalTime() {
  const now = new Date();

  const timeStr = now.toLocaleTimeString([], {
    hour: '2-digit',
    minute: '2-digit',
    second: '2-digit',
    hour12: true
  }).replace(/am|pm/, (match) => match.toUpperCase());

  const dateStr = now.toLocaleDateString([], {
    weekday: 'long',
    month: 'long',
    day: 'numeric',
    year: 'numeric'
  });

  document.querySelector('#time-tv .clock').textContent = timeStr;
  document.querySelector('#time-tv .date').textContent = dateStr;
}

setInterval(updateLocalTime, 1000);
updateLocalTime();

loadChannel(currentChannel);
</script>

</body>
</html>